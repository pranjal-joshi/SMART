<!--
  Author  : Pranjal P. Joshi
  Date    : 03/09/2016
  All rights reserved.
  SMART Welcome & login page.
-->

<html>
    <head>
      <style type="text/css">
      .indexBody {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }

      .contents {
        flex: 1;
      }
      </style>
      <!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link rel="stylesheet" href="materialize.min.css">
      
      <!-- link ubuntu font -->
      <link href='http://fonts.googleapis.com/css?family=Ubuntu&subset=cyrillic,latin' rel='stylesheet' type='text/css' />

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>S.M.A.R.T</title>
      <link rel="icon" href="welcome.ico" type="image/x-icon" />

    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="materialize.min.js"></script>
    <script type="text/javascript" src="smartSocket.js"></script>
    <script type="text/javascript" src="jquery.cookie.js"></script>

     <!-- Disable caching of browser -->
     <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
     <meta http-equiv="Pragma" content="no-cache" />
     <meta http-equiv="Expires" content="0" />
      </head>

    <body class="indexBody" style="font-family: ubuntu" onload="setTimeout(addClient, 100)">
    <script type="text/javascript">   //security using cookie
      try{
        var x = $.cookie('smartLogin');
        if(x == "grant"){
          location.href="control.html";
        }
    }
      catch(err){}
    </script>

    <main class="contents">
    <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper teal lighten-2" id="welcomeNavBar">
         <a href="#!" class="brand-logo center">S.M.A.R.T Login</a>
      </div>
    </nav>
    </div>

    <!-- error modal -->
      <div id="errorModal" class="modal grey lighten-4">
        <div class="modal-contnet">
          <center><h5 style="color: red">Oops!</h5>
          <div class="divider"></div>
          <p style="color: black">Something went wrong. S.M.A.R.T server is out of reach!</p></center>
        </div>
        <div class="modal-footer grey lighten-4">
          <a href="#!" class="modal-action modal-close waves-effect waves-red btn-flat">Done</a>
      </div>
      </div>

      <!-- Login help modal -->
      <div id="loginHelp" class="modal grey lighten-4">
        <div class="modal-content">
          <center><h4 style="color: teal">Login Help</h4></center>
          <div class="divider"></div>
          <p>To login, you will need to enter unique 5 digit PIN number provided with S.M.A.R.T system. You can find the number on user manual/receipt or there will be a sticker containing valid PIN on the outer box of S.M.A.R.T system. For further issue please contact our support.</p>
        </div>
        <div class="modal-footer color grey lighten-4">
          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Okay</a>
        </div>
      </div>

    <div class="row">
    <div class="col m4"></div>
    <div class="col s12 m4">
    <br></br>
    <div class="card-panel grey lighten-4" id="welcomCard">
      
      <center>
        <!---<i class="large material-icons">home</i>-->
        <img class="circle responsive-img" src="home_icon.png" width="100" height="100"></img>
        <br></br>
        <br></br>
          <div class="row">
            <div class="col s2"></div>
              <div class="col s8">
                <div class="input-field">
                  <i class="small material-icons prefix">vpn_key</i>
                  <label for="loginBox">Login key</label>
                  <input id="loginBox" type="password" class="validate">
                </div>
              </div>
          </div>

          <p>
            <input type="checkbox" class="filled-in" id="showPassword"/>
            <label for="showPassword">Show Password</label>
          </p>

          <button class="btn waves-effect waves-light" id="loginButton" onclick="login()">
            Login
            <i class="material-icons right">lock_open</i>
          </button>

          <br></br>
          <a data-target="loginHelp" class="modal-trigger">Help</a>
        
      </center>
      
    </div>
    </div>
    </div>

    </main>

    <footer class="page-footer teal lighten-2">
      <div class="footer-copyright">
        <div class="container">
         <center>Â© 2016 S.M.A.R.T, All rights reserved.</center>
        </div>
      </div>
    </footer>
      <script>
        (function ($) {
          $.toggleShowPassword = function (options) {
            var settings = $.extend({
            field: "#password",
            control: "#toggle_show_password",
          }, options);

          var control = $(settings.control);
          var field = $(settings.field)

          control.bind('click', function () {
              if (control.is(':checked')) {
                  field.attr('type', 'text');
              } else {
                  field.attr('type', 'password');
          }
        })
      };
      }(jQuery));

      $.toggleShowPassword({
        field: '#loginBox',
        control: '#showPassword'
      });

      $("#loginBox").keyup(function(event){
          if(event.keyCode == 13){
              $("#loginButton").click();
          }
      });
      </script>
     <!-- Compiled and minified CSS -->
    </body>
  </html>
